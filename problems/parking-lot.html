<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>#OOP-1 è¨­è¨ˆåœè»Šå ´ç³»çµ± - TSMC ç¨‹å¼é¡Œåº«</title>
    <link rel="stylesheet" href="../problem-detail.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/atom-one-dark.min.css">
</head>
<body>
    <header class="header">
        <div class="container">
            <a href="../index.html" class="back-link">â† è¿”å›é¡Œç›®åˆ—è¡¨</a>
            <h1 class="logo">ğŸ¢ TSMC ç¨‹å¼é¡Œåº«</h1>
        </div>
    </header>

    <main class="main">
        <div class="container">
            <div class="problem-content">
                <div class="problem-header">
                    <div class="problem-meta">
                        <span class="problem-number">#OOP-1</span>
                        <span class="difficulty medium">Medium</span>
                    </div>
                    <h1 class="problem-title">è¨­è¨ˆåœè»Šå ´ç³»çµ±</h1>
                    <div class="problem-tags">
                        <span class="tag">OOP</span>
                        <span class="tag">Design</span>
                        <span class="tag">System Design</span>
                    </div>
                </div>

                <section class="section">
                    <h2>é¡Œç›®æè¿°</h2>
                    <div class="content-box">
                        <p>è¨­è¨ˆä¸€å€‹åœè»Šå ´ç®¡ç†ç³»çµ±ï¼Œéœ€è¦æ»¿è¶³ä»¥ä¸‹éœ€æ±‚ï¼š</p>
                        <ol>
                            <li>åœè»Šå ´æœ‰å¤šå±¤æ¨“ï¼Œæ¯å±¤æ¨“æœ‰å¤šå€‹åœè»Šä½</li>
                            <li>åœè»Šä½åˆ†ç‚ºä¸‰ç¨®é¡å‹ï¼šæ©Ÿè»Šä½ã€æ±½è»Šä½ã€å¤§å‹è»Šä½</li>
                            <li>ä¸åŒè»Šå‹åªèƒ½åœåœ¨ç›¸æ‡‰çš„åœè»Šä½</li>
                            <li>ç³»çµ±éœ€è¦è¿½è¹¤æ¯å€‹åœè»Šä½çš„ä½”ç”¨ç‹€æ…‹</li>
                            <li>è¨ˆç®—åœè»Šè²»ç”¨ï¼ˆä¾ç…§åœè»Šæ™‚é•·å’Œè»Šå‹ï¼‰</li>
                            <li>é¡¯ç¤ºå¯ç”¨åœè»Šä½æ•¸é‡</li>
                        </ol>
                        <p><strong>é€™æ˜¯å°ç©é›»æœ€å¸¸è€ƒçš„ OOP è¨­è¨ˆé¡Œä¹‹ä¸€ï¼Œè‘—é‡è€ƒå¯Ÿç‰©ä»¶å°å‘çš„è¨­è¨ˆèƒ½åŠ›å’Œç³»çµ±æ¶æ§‹æ€ç¶­ã€‚</strong></p>
                    </div>
                </section>

                <section class="section">
                    <h2>è¨­è¨ˆè¦æ±‚</h2>
                    <div class="content-box">
                        <h3>æ ¸å¿ƒåŠŸèƒ½</h3>
                        <ul>
                            <li><code>parkVehicle(Vehicle vehicle)</code>ï¼šå°‡è»Šè¼›åœå…¥åœè»Šå ´</li>
                            <li><code>unparkVehicle(Vehicle vehicle)</code>ï¼šå°‡è»Šè¼›é§›é›¢åœè»Šå ´</li>
                            <li><code>getAvailableSpots(VehicleType type)</code>ï¼šç²å–å¯ç”¨åœè»Šä½æ•¸é‡</li>
                            <li><code>calculateFee(Vehicle vehicle)</code>ï¼šè¨ˆç®—åœè»Šè²»ç”¨</li>
                        </ul>
                        
                        <h3>æ”¶è²»æ¨™æº–</h3>
                        <ul>
                            <li>æ©Ÿè»Šï¼šæ¯å°æ™‚ $20</li>
                            <li>æ±½è»Šï¼šæ¯å°æ™‚ $50</li>
                            <li>å¤§å‹è»Šï¼šæ¯å°æ™‚ $100</li>
                            <li>æœªæ»¿ä¸€å°æ™‚ä»¥ä¸€å°æ™‚è¨ˆç®—</li>
                        </ul>
                    </div>
                </section>

                <section class="section">
                    <h2>è¨­è¨ˆæ€è·¯</h2>
                    <div class="content-box">
                        <h3>é¡åˆ¥è¨­è¨ˆ</h3>
                        <p>æˆ‘å€‘éœ€è¦ä»¥ä¸‹æ ¸å¿ƒé¡åˆ¥ï¼š</p>
                        <ol>
                            <li><strong>Vehicleï¼ˆè»Šè¼›ï¼‰</strong>ï¼šä»£è¡¨ä¸åŒé¡å‹çš„è»Šè¼›</li>
                            <li><strong>ParkingSpotï¼ˆåœè»Šä½ï¼‰</strong>ï¼šä»£è¡¨å–®å€‹åœè»Šä½</li>
                            <li><strong>Levelï¼ˆæ¨“å±¤ï¼‰</strong>ï¼šä»£è¡¨åœè»Šå ´çš„ä¸€å±¤</li>
                            <li><strong>ParkingLotï¼ˆåœè»Šå ´ï¼‰</strong>ï¼šæ•´å€‹åœè»Šå ´ç³»çµ±</li>
                            <li><strong>Ticketï¼ˆåœè»Šç¥¨ï¼‰</strong>ï¼šè¨˜éŒ„åœè»Šè³‡è¨Š</li>
                        </ol>

                        <h3>è¨­è¨ˆåŸå‰‡</h3>
                        <ul>
                            <li><strong>å–®ä¸€è·è²¬åŸå‰‡</strong>ï¼šæ¯å€‹é¡åˆ¥åªè² è²¬ä¸€é …åŠŸèƒ½</li>
                            <li><strong>é–‹æ”¾å°é–‰åŸå‰‡</strong>ï¼šæ˜“æ–¼æ“´å±•æ–°çš„è»Šè¼›é¡å‹</li>
                            <li><strong>ä¾è³´åè½‰åŸå‰‡</strong>ï¼šä¾è³´æ–¼æŠ½è±¡è€Œä¸æ˜¯å…·é«”å¯¦ç¾</li>
                        </ul>
                    </div>
                </section>

                <section class="section">
                    <h2>ç¨‹å¼ç¢¼å¯¦ä½œ</h2>
                    
                    <div class="code-tabs">
                        <button class="tab-btn active" data-lang="python">Python</button>
                        <button class="tab-btn" data-lang="java">Java</button>
                        <button class="tab-btn" data-lang="cpp">C++</button>
                    </div>

                    <div class="code-content python active">
                        <h3>Python å®Œæ•´å¯¦ä½œ</h3>
                        <pre><code class="language-python">from enum import Enum
from datetime import datetime
from typing import List, Optional
import math


class VehicleType(Enum):
    """è»Šè¼›é¡å‹æšèˆ‰"""
    MOTORCYCLE = "motorcycle"
    CAR = "car"
    TRUCK = "truck"


class Vehicle:
    """è»Šè¼›åŸºç¤é¡åˆ¥"""
    def __init__(self, license_plate: str, vehicle_type: VehicleType):
        self.license_plate = license_plate
        self.vehicle_type = vehicle_type
    
    def get_type(self) -> VehicleType:
        return self.vehicle_type
    
    def __str__(self):
        return f"{self.vehicle_type.value.upper()}-{self.license_plate}"


class Motorcycle(Vehicle):
    """æ©Ÿè»Šé¡åˆ¥"""
    def __init__(self, license_plate: str):
        super().__init__(license_plate, VehicleType.MOTORCYCLE)


class Car(Vehicle):
    """æ±½è»Šé¡åˆ¥"""
    def __init__(self, license_plate: str):
        super().__init__(license_plate, VehicleType.CAR)


class Truck(Vehicle):
    """å¤§å‹è»Šé¡åˆ¥"""
    def __init__(self, license_plate: str):
        super().__init__(license_plate, VehicleType.TRUCK)


class ParkingSpot:
    """åœè»Šä½é¡åˆ¥"""
    def __init__(self, spot_id: int, vehicle_type: VehicleType):
        self.spot_id = spot_id
        self.vehicle_type = vehicle_type
        self.vehicle: Optional[Vehicle] = None
        self.is_available = True
    
    def can_fit_vehicle(self, vehicle: Vehicle) -> bool:
        """æª¢æŸ¥è»Šè¼›æ˜¯å¦å¯ä»¥åœåœ¨æ­¤åœè»Šä½"""
        return self.is_available and self.vehicle_type == vehicle.get_type()
    
    def park(self, vehicle: Vehicle) -> bool:
        """åœè»Š"""
        if not self.can_fit_vehicle(vehicle):
            return False
        
        self.vehicle = vehicle
        self.is_available = False
        return True
    
    def unpark(self) -> Optional[Vehicle]:
        """é›¢é–‹åœè»Šä½"""
        if self.is_available:
            return None
        
        vehicle = self.vehicle
        self.vehicle = None
        self.is_available = True
        return vehicle
    
    def __str__(self):
        status = "Available" if self.is_available else f"Occupied by {self.vehicle}"
        return f"Spot {self.spot_id} ({self.vehicle_type.value}): {status}"


class Ticket:
    """åœè»Šç¥¨é¡åˆ¥"""
    _ticket_counter = 1
    
    def __init__(self, vehicle: Vehicle, spot: ParkingSpot):
        self.ticket_id = Ticket._ticket_counter
        Ticket._ticket_counter += 1
        self.vehicle = vehicle
        self.spot = spot
        self.entry_time = datetime.now()
        self.exit_time: Optional[datetime] = None
    
    def complete(self):
        """å®Œæˆåœè»Š"""
        self.exit_time = datetime.now()
    
    def get_duration_hours(self) -> int:
        """ç²å–åœè»Šæ™‚é•·ï¼ˆå°æ™‚ï¼Œå‘ä¸Šå–æ•´ï¼‰"""
        if self.exit_time is None:
            end_time = datetime.now()
        else:
            end_time = self.exit_time
        
        duration = (end_time - self.entry_time).total_seconds() / 3600
        return math.ceil(duration)  # æœªæ»¿ä¸€å°æ™‚ä»¥ä¸€å°æ™‚è¨ˆç®—


class Level:
    """åœè»Šå ´æ¨“å±¤é¡åˆ¥"""
    def __init__(self, level_number: int, motorcycle_spots: int, 
                 car_spots: int, truck_spots: int):
        self.level_number = level_number
        self.spots: List[ParkingSpot] = []
        
        # å‰µå»ºåœè»Šä½
        spot_id = level_number * 100
        
        # æ©Ÿè»Šä½
        for _ in range(motorcycle_spots):
            self.spots.append(ParkingSpot(spot_id, VehicleType.MOTORCYCLE))
            spot_id += 1
        
        # æ±½è»Šä½
        for _ in range(car_spots):
            self.spots.append(ParkingSpot(spot_id, VehicleType.CAR))
            spot_id += 1
        
        # å¤§å‹è»Šä½
        for _ in range(truck_spots):
            self.spots.append(ParkingSpot(spot_id, VehicleType.TRUCK))
            spot_id += 1
    
    def park_vehicle(self, vehicle: Vehicle) -> Optional[ParkingSpot]:
        """åœ¨æ­¤æ¨“å±¤åœè»Š"""
        for spot in self.spots:
            if spot.can_fit_vehicle(vehicle):
                if spot.park(vehicle):
                    return spot
        return None
    
    def get_available_spots(self, vehicle_type: VehicleType) -> int:
        """ç²å–æŒ‡å®šé¡å‹çš„å¯ç”¨åœè»Šä½æ•¸é‡"""
        count = 0
        for spot in self.spots:
            if spot.is_available and spot.vehicle_type == vehicle_type:
                count += 1
        return count


class ParkingLot:
    """åœè»Šå ´ä¸»é¡åˆ¥"""
    # æ”¶è²»æ¨™æº–ï¼ˆæ¯å°æ™‚ï¼‰
    RATES = {
        VehicleType.MOTORCYCLE: 20,
        VehicleType.CAR: 50,
        VehicleType.TRUCK: 100
    }
    
    def __init__(self, num_levels: int, spots_per_level: dict):
        self.levels: List[Level] = []
        self.tickets: dict[str, Ticket] = {}  # license_plate -> Ticket
        
        # å‰µå»ºå„å±¤æ¨“
        for i in range(num_levels):
            level = Level(
                i + 1,
                spots_per_level.get('motorcycle', 0),
                spots_per_level.get('car', 0),
                spots_per_level.get('truck', 0)
            )
            self.levels.append(level)
    
    def park_vehicle(self, vehicle: Vehicle) -> Optional[Ticket]:
        """åœè»Š"""
        # æª¢æŸ¥æ˜¯å¦å·²ç¶“åœåœ¨åœè»Šå ´å…§
        if vehicle.license_plate in self.tickets:
            print(f"è»Šè¼› {vehicle} å·²åœ¨åœè»Šå ´å…§")
            return None
        
        # å˜—è©¦åœ¨å„å±¤æ¨“åœè»Š
        for level in self.levels:
            spot = level.park_vehicle(vehicle)
            if spot:
                ticket = Ticket(vehicle, spot)
                self.tickets[vehicle.license_plate] = ticket
                print(f"âœ… {vehicle} åœåœ¨ Level {level.level_number}, Spot {spot.spot_id}")
                return ticket
        
        print(f"âŒ æ²’æœ‰å¯ç”¨çš„åœè»Šä½çµ¦ {vehicle}")
        return None
    
    def unpark_vehicle(self, license_plate: str) -> Optional[float]:
        """è»Šè¼›é›¢å ´ä¸¦è¨ˆç®—è²»ç”¨"""
        if license_plate not in self.tickets:
            print(f"æ‰¾ä¸åˆ°è»Šç‰Œ {license_plate} çš„è¨˜éŒ„")
            return None
        
        ticket = self.tickets[license_plate]
        ticket.complete()
        
        # é‡‹æ”¾åœè»Šä½
        ticket.spot.unpark()
        
        # è¨ˆç®—è²»ç”¨
        fee = self.calculate_fee(ticket)
        
        # ç§»é™¤ç¥¨è­‰è¨˜éŒ„
        del self.tickets[license_plate]
        
        print(f"âœ… {ticket.vehicle} é›¢å ´")
        print(f"   åœè»Šæ™‚é•·: {ticket.get_duration_hours()} å°æ™‚")
        print(f"   åœè»Šè²»ç”¨: ${fee}")
        
        return fee
    
    def calculate_fee(self, ticket: Ticket) -> float:
        """è¨ˆç®—åœè»Šè²»ç”¨"""
        hours = ticket.get_duration_hours()
        rate = self.RATES[ticket.vehicle.get_type()]
        return hours * rate
    
    def get_available_spots(self, vehicle_type: VehicleType) -> int:
        """ç²å–æŒ‡å®šé¡å‹çš„ç¸½å¯ç”¨åœè»Šä½æ•¸é‡"""
        total = 0
        for level in self.levels:
            total += level.get_available_spots(vehicle_type)
        return total
    
    def display_status(self):
        """é¡¯ç¤ºåœè»Šå ´ç‹€æ…‹"""
        print("\n" + "="*50)
        print("åœè»Šå ´ç‹€æ…‹")
        print("="*50)
        for vehicle_type in VehicleType:
            available = self.get_available_spots(vehicle_type)
            print(f"{vehicle_type.value.upper():12} : {available} å€‹ç©ºä½")
        print("="*50 + "\n")


# æ¸¬è©¦ç¨‹å¼
def test_parking_lot():
    """æ¸¬è©¦åœè»Šå ´ç³»çµ±"""
    print("ğŸš— å°ç©é›»åœè»Šå ´ç³»çµ±æ¸¬è©¦\n")
    
    # å‰µå»ºåœè»Šå ´ï¼š3å±¤æ¨“ï¼Œæ¯å±¤ 10å€‹æ©Ÿè»Šä½ã€20å€‹æ±½è»Šä½ã€5å€‹å¤§å‹è»Šä½
    parking_lot = ParkingLot(3, {
        'motorcycle': 10,
        'car': 20,
        'truck': 5
    })
    
    # é¡¯ç¤ºåˆå§‹ç‹€æ…‹
    parking_lot.display_status()
    
    # æ¸¬è©¦åœè»Š
    print("ğŸ“ æ¸¬è©¦åœè»ŠåŠŸèƒ½\n")
    
    motorcycle1 = Motorcycle("ABC-1234")
    car1 = Car("XYZ-5678")
    car2 = Car("DEF-9999")
    truck1 = Truck("BIG-0001")
    
    parking_lot.park_vehicle(motorcycle1)
    parking_lot.park_vehicle(car1)
    parking_lot.park_vehicle(car2)
    parking_lot.park_vehicle(truck1)
    
    # é¡¯ç¤ºåœè»Šå¾Œç‹€æ…‹
    parking_lot.display_status()
    
    # æ¨¡æ“¬ä¸€æ®µæ™‚é–“å¾Œé›¢å ´
    print("\nğŸ“ æ¸¬è©¦é›¢å ´åŠŸèƒ½\n")
    import time
    time.sleep(2)  # æ¨¡æ“¬åœè»Š 2 ç§’ï¼ˆå¯¦éš›æœƒä»¥å°æ™‚è¨ˆç®—ï¼Œå‘ä¸Šå–æ•´ç‚º1å°æ™‚ï¼‰
    
    parking_lot.unpark_vehicle("ABC-1234")
    parking_lot.unpark_vehicle("XYZ-5678")
    
    # é¡¯ç¤ºæœ€çµ‚ç‹€æ…‹
    parking_lot.display_status()
    
    print("âœ… æ¸¬è©¦å®Œæˆï¼")


if __name__ == "__main__":
    test_parking_lot()
</code></pre>
                    </div>

                    <div class="code-content java">
                        <h3>Java å®Œæ•´å¯¦ä½œ</h3>
                        <pre><code class="language-java">import java.time.Duration;
import java.time.LocalDateTime;
import java.util.*;

// è»Šè¼›é¡å‹æšèˆ‰
enum VehicleType {
    MOTORCYCLE, CAR, TRUCK
}

// è»Šè¼›æŠ½è±¡é¡åˆ¥
abstract class Vehicle {
    protected String licensePlate;
    protected VehicleType type;
    
    public Vehicle(String licensePlate, VehicleType type) {
        this.licensePlate = licensePlate;
        this.type = type;
    }
    
    public VehicleType getType() {
        return type;
    }
    
    public String getLicensePlate() {
        return licensePlate;
    }
    
    @Override
    public String toString() {
        return type + "-" + licensePlate;
    }
}

// æ©Ÿè»Šé¡åˆ¥
class Motorcycle extends Vehicle {
    public Motorcycle(String licensePlate) {
        super(licensePlate, VehicleType.MOTORCYCLE);
    }
}

// æ±½è»Šé¡åˆ¥
class Car extends Vehicle {
    public Car(String licensePlate) {
        super(licensePlate, VehicleType.CAR);
    }
}

// å¤§å‹è»Šé¡åˆ¥
class Truck extends Vehicle {
    public Truck(String licensePlate) {
        super(licensePlate, VehicleType.TRUCK);
    }
}

// åœè»Šä½é¡åˆ¥
class ParkingSpot {
    private int spotId;
    private VehicleType type;
    private Vehicle vehicle;
    private boolean isAvailable;
    
    public ParkingSpot(int spotId, VehicleType type) {
        this.spotId = spotId;
        this.type = type;
        this.isAvailable = true;
    }
    
    public boolean canFitVehicle(Vehicle vehicle) {
        return isAvailable && this.type == vehicle.getType();
    }
    
    public boolean park(Vehicle vehicle) {
        if (!canFitVehicle(vehicle)) {
            return false;
        }
        this.vehicle = vehicle;
        this.isAvailable = false;
        return true;
    }
    
    public Vehicle unpark() {
        if (isAvailable) {
            return null;
        }
        Vehicle v = this.vehicle;
        this.vehicle = null;
        this.isAvailable = true;
        return v;
    }
    
    public boolean isAvailable() {
        return isAvailable;
    }
    
    public VehicleType getType() {
        return type;
    }
    
    public int getSpotId() {
        return spotId;
    }
}

// åœè»Šç¥¨é¡åˆ¥
class Ticket {
    private static int counter = 1;
    private int ticketId;
    private Vehicle vehicle;
    private ParkingSpot spot;
    private LocalDateTime entryTime;
    private LocalDateTime exitTime;
    
    public Ticket(Vehicle vehicle, ParkingSpot spot) {
        this.ticketId = counter++;
        this.vehicle = vehicle;
        this.spot = spot;
        this.entryTime = LocalDateTime.now();
    }
    
    public void complete() {
        this.exitTime = LocalDateTime.now();
    }
    
    public int getDurationHours() {
        LocalDateTime end = (exitTime != null) ? exitTime : LocalDateTime.now();
        long seconds = Duration.between(entryTime, end).getSeconds();
        return (int) Math.ceil(seconds / 3600.0);
    }
    
    public Vehicle getVehicle() {
        return vehicle;
    }
    
    public ParkingSpot getSpot() {
        return spot;
    }
}

// æ¨“å±¤é¡åˆ¥
class Level {
    private int levelNumber;
    private List<ParkingSpot> spots;
    
    public Level(int levelNumber, int motorcycleSpots, int carSpots, int truckSpots) {
        this.levelNumber = levelNumber;
        this.spots = new ArrayList<>();
        
        int spotId = levelNumber * 100;
        
        // å‰µå»ºæ©Ÿè»Šä½
        for (int i = 0; i < motorcycleSpots; i++) {
            spots.add(new ParkingSpot(spotId++, VehicleType.MOTORCYCLE));
        }
        
        // å‰µå»ºæ±½è»Šä½
        for (int i = 0; i < carSpots; i++) {
            spots.add(new ParkingSpot(spotId++, VehicleType.CAR));
        }
        
        // å‰µå»ºå¤§å‹è»Šä½
        for (int i = 0; i < truckSpots; i++) {
            spots.add(new ParkingSpot(spotId++, VehicleType.TRUCK));
        }
    }
    
    public ParkingSpot parkVehicle(Vehicle vehicle) {
        for (ParkingSpot spot : spots) {
            if (spot.canFitVehicle(vehicle)) {
                if (spot.park(vehicle)) {
                    return spot;
                }
            }
        }
        return null;
    }
    
    public int getAvailableSpots(VehicleType type) {
        int count = 0;
        for (ParkingSpot spot : spots) {
            if (spot.isAvailable() && spot.getType() == type) {
                count++;
            }
        }
        return count;
    }
    
    public int getLevelNumber() {
        return levelNumber;
    }
}

// åœè»Šå ´ä¸»é¡åˆ¥
class ParkingLot {
    private static final Map<VehicleType, Integer> RATES = new HashMap<>() {{
        put(VehicleType.MOTORCYCLE, 20);
        put(VehicleType.CAR, 50);
        put(VehicleType.TRUCK, 100);
    }};
    
    private List<Level> levels;
    private Map<String, Ticket> tickets;
    
    public ParkingLot(int numLevels, int motorcycleSpots, int carSpots, int truckSpots) {
        this.levels = new ArrayList<>();
        this.tickets = new HashMap<>();
        
        for (int i = 0; i < numLevels; i++) {
            levels.add(new Level(i + 1, motorcycleSpots, carSpots, truckSpots));
        }
    }
    
    public Ticket parkVehicle(Vehicle vehicle) {
        if (tickets.containsKey(vehicle.getLicensePlate())) {
            System.out.println("è»Šè¼› " + vehicle + " å·²åœ¨åœè»Šå ´å…§");
            return null;
        }
        
        for (Level level : levels) {
            ParkingSpot spot = level.parkVehicle(vehicle);
            if (spot != null) {
                Ticket ticket = new Ticket(vehicle, spot);
                tickets.put(vehicle.getLicensePlate(), ticket);
                System.out.println("âœ… " + vehicle + " åœåœ¨ Level " + 
                                 level.getLevelNumber() + ", Spot " + spot.getSpotId());
                return ticket;
            }
        }
        
        System.out.println("âŒ æ²’æœ‰å¯ç”¨çš„åœè»Šä½çµ¦ " + vehicle);
        return null;
    }
    
    public Double unparkVehicle(String licensePlate) {
        if (!tickets.containsKey(licensePlate)) {
            System.out.println("æ‰¾ä¸åˆ°è»Šç‰Œ " + licensePlate + " çš„è¨˜éŒ„");
            return null;
        }
        
        Ticket ticket = tickets.get(licensePlate);
        ticket.complete();
        ticket.getSpot().unpark();
        
        double fee = calculateFee(ticket);
        tickets.remove(licensePlate);
        
        System.out.println("âœ… " + ticket.getVehicle() + " é›¢å ´");
        System.out.println("   åœè»Šæ™‚é•·: " + ticket.getDurationHours() + " å°æ™‚");
        System.out.println("   åœè»Šè²»ç”¨: $" + fee);
        
        return fee;
    }
    
    public double calculateFee(Ticket ticket) {
        int hours = ticket.getDurationHours();
        int rate = RATES.get(ticket.getVehicle().getType());
        return hours * rate;
    }
    
    public int getAvailableSpots(VehicleType type) {
        int total = 0;
        for (Level level : levels) {
            total += level.getAvailableSpots(type);
        }
        return total;
    }
    
    public void displayStatus() {
        System.out.println("\n" + "=".repeat(50));
        System.out.println("åœè»Šå ´ç‹€æ…‹");
        System.out.println("=".repeat(50));
        for (VehicleType type : VehicleType.values()) {
            int available = getAvailableSpots(type);
            System.out.printf("%-12s : %d å€‹ç©ºä½\n", type, available);
        }
        System.out.println("=".repeat(50) + "\n");
    }
    
    // æ¸¬è©¦ä¸»ç¨‹å¼
    public static void main(String[] args) throws InterruptedException {
        System.out.println("ğŸš— å°ç©é›»åœè»Šå ´ç³»çµ±æ¸¬è©¦\n");
        
        ParkingLot parkingLot = new ParkingLot(3, 10, 20, 5);
        parkingLot.displayStatus();
        
        System.out.println("ğŸ“ æ¸¬è©¦åœè»ŠåŠŸèƒ½\n");
        Vehicle motorcycle1 = new Motorcycle("ABC-1234");
        Vehicle car1 = new Car("XYZ-5678");
        Vehicle car2 = new Car("DEF-9999");
        Vehicle truck1 = new Truck("BIG-0001");
        
        parkingLot.parkVehicle(motorcycle1);
        parkingLot.parkVehicle(car1);
        parkingLot.parkVehicle(car2);
        parkingLot.parkVehicle(truck1);
        
        parkingLot.displayStatus();
        
        System.out.println("\nğŸ“ æ¸¬è©¦é›¢å ´åŠŸèƒ½\n");
        Thread.sleep(2000);
        
        parkingLot.unparkVehicle("ABC-1234");
        parkingLot.unparkVehicle("XYZ-5678");
        
        parkingLot.displayStatus();
        System.out.println("âœ… æ¸¬è©¦å®Œæˆï¼");
    }
}
</code></pre>
                    </div>

                    <div class="code-content cpp">
                        <h3>C++ å®Œæ•´å¯¦ä½œï¼ˆç¯€éŒ„é—œéµéƒ¨åˆ†ï¼‰</h3>
                        <pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;map&gt;
#include &lt;memory&gt;
#include &lt;ctime&gt;
#include &lt;cmath&gt;

enum class VehicleType {
    MOTORCYCLE,
    CAR,
    TRUCK
};

// è»Šè¼›åŸºç¤é¡åˆ¥
class Vehicle {
protected:
    std::string licensePlate;
    VehicleType type;
    
public:
    Vehicle(std::string plate, VehicleType t) 
        : licensePlate(plate), type(t) {}
    
    virtual ~Vehicle() = default;
    
    VehicleType getType() const { return type; }
    std::string getLicensePlate() const { return licensePlate; }
    
    virtual std::string toString() const {
        return "Vehicle-" + licensePlate;
    }
};

// æ©Ÿè»Šé¡åˆ¥
class Motorcycle : public Vehicle {
public:
    Motorcycle(std::string plate) 
        : Vehicle(plate, VehicleType::MOTORCYCLE) {}
    
    std::string toString() const override {
        return "MOTORCYCLE-" + licensePlate;
    }
};

// æ±½è»Šé¡åˆ¥
class Car : public Vehicle {
public:
    Car(std::string plate) 
        : Vehicle(plate, VehicleType::CAR) {}
    
    std::string toString() const override {
        return "CAR-" + licensePlate;
    }
};

// å¤§å‹è»Šé¡åˆ¥
class Truck : public Vehicle {
public:
    Truck(std::string plate) 
        : Vehicle(plate, VehicleType::TRUCK) {}
    
    std::string toString() const override {
        return "TRUCK-" + licensePlate;
    }
};

// åœè»Šä½é¡åˆ¥
class ParkingSpot {
private:
    int spotId;
    VehicleType type;
    std::shared_ptr&lt;Vehicle&gt; vehicle;
    bool available;
    
public:
    ParkingSpot(int id, VehicleType t) 
        : spotId(id), type(t), vehicle(nullptr), available(true) {}
    
    bool canFitVehicle(std::shared_ptr&lt;Vehicle&gt; v) const {
        return available && type == v->getType();
    }
    
    bool park(std::shared_ptr&lt;Vehicle&gt; v) {
        if (!canFitVehicle(v)) return false;
        vehicle = v;
        available = false;
        return true;
    }
    
    std::shared_ptr&lt;Vehicle&gt; unpark() {
        if (available) return nullptr;
        auto v = vehicle;
        vehicle = nullptr;
        available = true;
        return v;
    }
    
    bool isAvailable() const { return available; }
    VehicleType getType() const { return type; }
    int getSpotId() const { return spotId; }
};

// åœè»Šç¥¨é¡åˆ¥
class Ticket {
private:
    static int counter;
    int ticketId;
    std::shared_ptr&lt;Vehicle&gt; vehicle;
    std::shared_ptr&lt;ParkingSpot&gt; spot;
    time_t entryTime;
    time_t exitTime;
    
public:
    Ticket(std::shared_ptr&lt;Vehicle&gt; v, std::shared_ptr&lt;ParkingSpot&gt; s)
        : ticketId(++counter), vehicle(v), spot(s) {
        entryTime = time(nullptr);
        exitTime = 0;
    }
    
    void complete() {
        exitTime = time(nullptr);
    }
    
    int getDurationHours() const {
        time_t end = (exitTime != 0) ? exitTime : time(nullptr);
        double seconds = difftime(end, entryTime);
        return (int)std::ceil(seconds / 3600.0);
    }
    
    std::shared_ptr&lt;Vehicle&gt; getVehicle() const { return vehicle; }
    std::shared_ptr&lt;ParkingSpot&gt; getSpot() const { return spot; }
};

int Ticket::counter = 0;

// åœè»Šå ´ä¸»é¡åˆ¥
class ParkingLot {
private:
    std::vector&lt;std::vector&lt;std::shared_ptr&lt;ParkingSpot&gt;&gt;&gt; levels;
    std::map&lt;std::string, std::shared_ptr&lt;Ticket&gt;&gt; tickets;
    
    static const std::map&lt;VehicleType, int&gt; RATES;
    
public:
    ParkingLot(int numLevels, int motorcycleSpots, int carSpots, int truckSpots) {
        for (int i = 0; i < numLevels; i++) {
            std::vector&lt;std::shared_ptr&lt;ParkingSpot&gt;&gt; level;
            int spotId = (i + 1) * 100;
            
            for (int j = 0; j < motorcycleSpots; j++) {
                level.push_back(std::make_shared&lt;ParkingSpot&gt;(spotId++, VehicleType::MOTORCYCLE));
            }
            for (int j = 0; j < carSpots; j++) {
                level.push_back(std::make_shared&lt;ParkingSpot&gt;(spotId++, VehicleType::CAR));
            }
            for (int j = 0; j < truckSpots; j++) {
                level.push_back(std::make_shared&lt;ParkingSpot&gt;(spotId++, VehicleType::TRUCK));
            }
            
            levels.push_back(level);
        }
    }
    
    std::shared_ptr&lt;Ticket&gt; parkVehicle(std::shared_ptr&lt;Vehicle&gt; vehicle) {
        if (tickets.find(vehicle->getLicensePlate()) != tickets.end()) {
            std::cout << "è»Šè¼›å·²åœ¨åœè»Šå ´å…§\n";
            return nullptr;
        }
        
        for (size_t i = 0; i < levels.size(); i++) {
            for (auto& spot : levels[i]) {
                if (spot->canFitVehicle(vehicle)) {
                    if (spot->park(vehicle)) {
                        auto ticket = std::make_shared&lt;Ticket&gt;(vehicle, spot);
                        tickets[vehicle->getLicensePlate()] = ticket;
                        std::cout << "âœ… " << vehicle->toString() 
                                  << " åœåœ¨ Level " << (i+1) 
                                  << ", Spot " << spot->getSpotId() << "\n";
                        return ticket;
                    }
                }
            }
        }
        
        std::cout << "âŒ æ²’æœ‰å¯ç”¨çš„åœè»Šä½\n";
        return nullptr;
    }
    
    double unparkVehicle(std::string licensePlate) {
        auto it = tickets.find(licensePlate);
        if (it == tickets.end()) {
            std::cout << "æ‰¾ä¸åˆ°è»Šè¼›è¨˜éŒ„\n";
            return -1;
        }
        
        auto ticket = it->second;
        ticket->complete();
        ticket->getSpot()->unpark();
        
        double fee = calculateFee(ticket);
        tickets.erase(it);
        
        std::cout << "âœ… è»Šè¼›é›¢å ´\n";
        std::cout << "   åœè»Šæ™‚é•·: " << ticket->getDurationHours() << " å°æ™‚\n";
        std::cout << "   åœè»Šè²»ç”¨: $" << fee << "\n";
        
        return fee;
    }
    
    double calculateFee(std::shared_ptr&lt;Ticket&gt; ticket) const {
        int hours = ticket->getDurationHours();
        int rate = RATES.at(ticket->getVehicle()->getType());
        return hours * rate;
    }
};

const std::map&lt;VehicleType, int&gt; ParkingLot::RATES = {
    {VehicleType::MOTORCYCLE, 20},
    {VehicleType::CAR, 50},
    {VehicleType::TRUCK, 100}
};
</code></pre>
                    </div>
                </section>

                <section class="section">
                    <h2>å°ç©é›»é¢è©¦è¦é»</h2>
                    <div class="interview-tips">
                        <div class="tip-box">
                            <h3>ğŸ’¡ è¨­è¨ˆé‡é»</h3>
                            <ul>
                                <li>æ¸…æ¥šå®šç¾©å„é¡åˆ¥çš„è·è²¬</li>
                                <li>ä½¿ç”¨ç¹¼æ‰¿å’Œå¤šå‹ä¾†æ“´å±•è»Šè¼›é¡å‹</li>
                                <li>è€ƒæ…®ç³»çµ±çš„å¯æ“´å±•æ€§</li>
                                <li>è™•ç†ä½µç™¼å•é¡Œï¼ˆå¤šå°è»ŠåŒæ™‚åœè»Šï¼‰</li>
                                <li>åˆç†çš„è³‡æ–™çµæ§‹é¸æ“‡</li>
                            </ul>
                        </div>
                        <div class="tip-box">
                            <h3>ğŸ¯ å¸¸è¦‹è¿½å•</h3>
                            <ul>
                                <li>å¦‚ä½•è™•ç†å¤šå€‹å…¥å£/å‡ºå£ï¼Ÿ</li>
                                <li>å¦‚ä½•æ”¯æ´é ç´„åœè»Šä½ï¼Ÿ</li>
                                <li>å¦‚ä½•å¯¦ç¾ä¸åŒçš„æ”¶è²»ç­–ç•¥ï¼Ÿ</li>
                                <li>å¦‚ä½•è™•ç†éºå¤±åœè»Šç¥¨çš„æƒ…æ³ï¼Ÿ</li>
                                <li>å¦‚ä½•å„ªåŒ–å°‹æ‰¾ç©ºä½çš„æ•ˆç‡ï¼Ÿ</li>
                            </ul>
                        </div>
                        <div class="tip-box">
                            <h3>âš ï¸ è¨­è¨ˆåŸå‰‡</h3>
                            <ul>
                                <li>SOLID åŸå‰‡çš„æ‡‰ç”¨</li>
                                <li>é¿å…éåº¦è¨­è¨ˆ</li>
                                <li>è€ƒæ…®çœŸå¯¦ä¸–ç•Œçš„é™åˆ¶</li>
                                <li>éŒ¯èª¤è™•ç†å’Œé‚Šç•Œæ¢ä»¶</li>
                                <li>ç¨‹å¼ç¢¼çš„å¯è®€æ€§å’Œç¶­è­·æ€§</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <section class="section">
                    <h2>æ“´å±•åŠŸèƒ½</h2>
                    <div class="content-box">
                        <h3>é€²éšéœ€æ±‚</h3>
                        <ol>
                            <li><strong>é ç´„ç³»çµ±</strong>ï¼šæ”¯æ´ç·šä¸Šé ç´„åœè»Šä½</li>
                            <li><strong>æœƒå“¡åˆ¶åº¦</strong>ï¼šæœƒå“¡äº«æœ‰æŠ˜æ‰£å’Œå°ˆå±¬åœè»Šä½</li>
                            <li><strong>é›»å‹•è»Šå……é›»</strong>ï¼šç‰¹å®šåœè»Šä½æä¾›å……é›»æœå‹™</li>
                            <li><strong>æ®˜éšœå°ˆç”¨ä½</strong>ï¼šä¿ç•™ç‰¹å®šæ¯”ä¾‹çš„ç„¡éšœç¤™åœè»Šä½</li>
                            <li><strong>åœè»Šå°å¼•</strong>ï¼šé¡¯ç¤ºæœ€è¿‘çš„ç©ºä½ä½ç½®</li>
                            <li><strong>å¤šç¨®æ”¯ä»˜æ–¹å¼</strong>ï¼šç¾é‡‘ã€ä¿¡ç”¨å¡ã€è¡Œå‹•æ”¯ä»˜</li>
                        </ol>
                    </div>
                </section>

                <section class="section">
                    <h2>ç›¸é—œé¡Œç›®</h2>
                    <div class="related-problems">
                        <a href="elevator-system.html" class="related-link">
                            <span class="related-number">#OOP-2</span>
                            <span class="related-title">è¨­è¨ˆé›»æ¢¯ç³»çµ±</span>
                            <span class="difficulty medium">Medium</span>
                        </a>
                        <a href="library-system.html" class="related-link">
                            <span class="related-number">#OOP-3</span>
                            <span class="related-title">è¨­è¨ˆåœ–æ›¸é¤¨ç®¡ç†ç³»çµ±</span>
                            <span class="difficulty easy">Easy</span>
                        </a>
                        <a href="lru-cache.html" class="related-link">
                            <span class="related-number">#146</span>
                            <span class="related-title">LRU Cache</span>
                            <span class="difficulty hard">Hard</span>
                        </a>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>TSMC ç¨‹å¼é¡Œåº«ç·´ç¿’å¹³å° | <a href="../index.html">è¿”å›é¦–é </a></p>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/cpp.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/java.min.js"></script>
    <script src="../problem-detail.js"></script>
</body>
</html>